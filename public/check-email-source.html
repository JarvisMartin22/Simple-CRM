<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Check Email Source for Tracking</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 { color: #0070f3; text-align: center; }
        .instructions {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .code-block {
            background: #f4f4f4;
            padding: 15px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin: 10px 0;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .highlight {
            background: yellow;
            padding: 2px 4px;
            font-weight: bold;
        }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .warning { background: #fff3cd; color: #856404; border: 1px solid #ffeeba; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Check Email Source for Tracking Pixels</h1>
        
        <div class="instructions">
            <h2>üìß How to Check Your Sent Emails</h2>
            <p>To verify that your campaign emails contain the enhanced tracking pixels:</p>
            
            <h3>üîç Step 1: Access the Email</h3>
            <ol>
                <li>Go to your <strong>Gmail account</strong> (the one you sent FROM)</li>
                <li>Look for the <strong>"CRM-Sent"</strong> label (auto-created by our enhanced system)</li>
                <li>Find the campaign email you just sent</li>
                <li>Open the email</li>
            </ol>
            
            <h3>üîç Step 2: View Email Source</h3>
            <ol>
                <li>In Gmail, click the <strong>three dots ‚ãÆ</strong> in the top-right of the email</li>
                <li>Select <strong>"Show original"</strong></li>
                <li>A new tab will open with the raw email source</li>
            </ol>
            
            <h3>üîç Step 3: Search for Tracking Pixel</h3>
            <p>Look for the enhanced tracking pixel by searching for:</p>
            <div class="code-block">
<span class="highlight">&lt;img src="https://bujaaqjxrvntcneoarkj.supabase.co/functions/v1/email-tracker?id=</span>
</div>
            
            <h3>‚úÖ What You Should Find:</h3>
            <div class="code-block success">
&lt;img src="https://bujaaqjxrvntcneoarkj.supabase.co/functions/v1/email-tracker?id=550e8400-e29b-41d4-a716-446655440000" 
     width="1" height="1" alt="" 
     style="position:absolute;left:-9999px;top:-9999px;visibility:hidden;opacity:0;border:0;outline:0;" 
     loading="lazy" /&gt;
</div>
            
            <h3>‚ùå If You Don't Find It:</h3>
            <div class="code-block error">
This means the tracking pixel wasn't added properly.
Check the send-email function logs for errors.
</div>
        </div>
        
        <div class="instructions">
            <h2>üéØ Step 4: Test the Tracking</h2>
            <p>To test if tracking works:</p>
            <ol>
                <li>Go to the email you received (in iwanaemailjarvis@gmail.com)</li>
                <li>Open the email (this should trigger the tracking pixel)</li>
                <li>Wait 30 seconds</li>
                <li>Check analytics again using: <a href="http://localhost:8080/test-analytics.html">Analytics Tester</a></li>
            </ol>
        </div>
        
        <div class="instructions warning">
            <h2>üîç Troubleshooting</h2>
            <h3>If tracking still shows 0 opens:</h3>
            <ul>
                <li><strong>Gmail Privacy Protection:</strong> Even our enhanced stealth might be blocked in some cases</li>
                <li><strong>Email Client:</strong> Some clients block all external images</li>
                <li><strong>Network:</strong> Corporate/school networks might block tracking</li>
                <li><strong>Ad Blockers:</strong> Browser extensions might block tracking pixels</li>
            </ul>
            
            <h3>üß™ Alternative Test:</h3>
            <p>Try opening the email from a different email client or device:</p>
            <ul>
                <li>Mobile Gmail app</li>
                <li>Different browser</li>
                <li>Incognito/private mode</li>
                <li>Different email service (if you have one)</li>
            </ul>
        </div>
        
        <div class="instructions">
            <h2>üìä Expected Results</h2>
            <p>After opening the email, your analytics should show:</p>
            <div class="code-block success">
{
  "opened_count": 1,
  "unique_opened_count": 1,
  "last_event_at": "2025-05-30T18:30:00.000Z"
}
</div>
        </div>
    </div>
</body>
</html> 