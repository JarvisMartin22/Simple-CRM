<!DOCTYPE html>
<html>
<head>
    <title>Gmail Debug</title>
</head>
<body>
    <h1>Gmail OAuth Debug</h1>
    <div id="status">Checking localStorage...</div>
    <div id="result"></div>
    
    <script>
        function checkLocalStorage() {
            const result = localStorage.getItem('gmail_auth_result');
            if (result) {
                document.getElementById('status').textContent = 'Found result!';
                document.getElementById('result').textContent = result;
                console.log('Gmail auth result:', result);
            } else {
                document.getElementById('status').textContent = 'No result found';
                setTimeout(checkLocalStorage, 1000);
            }
        }
        
        // Check on load
        checkLocalStorage();
        
        // Also listen for storage events
        window.addEventListener('storage', function(e) {
            if (e.key === 'gmail_auth_result') {
                console.log('Storage event detected:', e.newValue);
                checkLocalStorage();
            }
        });
        
        console.log('Debug page loaded, checking for auth results...');
    </script>
</body>
</html>