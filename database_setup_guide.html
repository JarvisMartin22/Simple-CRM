<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simple CRM - Database Setup Guide</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      line-height: 1.6;
      color: #333;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    h1, h2, h3 {
      color: #0070f3;
    }
    .step {
      margin-bottom: 30px;
      padding: 20px;
      border-radius: 8px;
      background-color: #f5f5f5;
    }
    .step h3 {
      margin-top: 0;
    }
    .warning {
      background-color: #fff8e1;
      border-left: 4px solid #ffc107;
      padding: 15px;
      margin: 20px 0;
    }
    .success {
      background-color: #e8f5e9;
      border-left: 4px solid #4caf50;
      padding: 15px;
      margin: 20px 0;
    }
    code {
      background-color: #f1f1f1;
      padding: 2px 4px;
      border-radius: 4px;
      font-family: 'Courier New', Courier, monospace;
    }
    .highlight {
      background-color: #e3f2fd;
      padding: 2px 4px;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <h1>Simple CRM - Database Setup Guide</h1>
  
  <p>
    This guide will help you set up all the required database tables for the Simple CRM application in your Supabase project.
    The process involves running the combined SQL migrations in the Supabase SQL Editor.
  </p>

  <div class="warning">
    <strong>Important:</strong> Before proceeding, make sure you have access to your Supabase project and have the necessary permissions to execute SQL commands.
  </div>

  <div class="step">
    <h3>Step 1: Access your Supabase Dashboard</h3>
    <p>
      Navigate to <a href="https://app.supabase.com" target="_blank">https://app.supabase.com</a> and sign in to your account.
      Then select the project you're using for Simple CRM.
    </p>
  </div>

  <div class="step">
    <h3>Step 2: Open the SQL Editor</h3>
    <p>
      In the left sidebar menu, click on <span class="highlight">SQL Editor</span>.
      Then click on <span class="highlight">+ New query</span> to create a new SQL query.
    </p>
  </div>

  <div class="step">
    <h3>Step 3: Copy the Combined SQL</h3>
    <p>
      Open the file <code>combined_migrations.sql</code> that was generated by the script. 
      Copy all of its contents (Ctrl+A, Ctrl+C or Cmd+A, Cmd+C).
    </p>
  </div>

  <div class="step">
    <h3>Step 4: Paste and Execute</h3>
    <p>
      Paste the copied SQL into the Supabase SQL Editor (Ctrl+V or Cmd+V).
      Then click the <span class="highlight">Run</span> button to execute all migrations.
    </p>
    <div class="warning">
      <strong>Note:</strong> The execution might take a minute or two as it's creating multiple tables, indexes, and policies.
    </div>
  </div>

  <div class="step">
    <h3>Step 5: Verify the Result</h3>
    <p>
      After execution completes, you should see a success message. You can verify the tables were created by:
    </p>
    <ol>
      <li>Going to the <span class="highlight">Table Editor</span> in the Supabase dashboard</li>
      <li>You should see tables like <code>contacts</code>, <code>companies</code>, <code>pipelines</code>, <code>deals</code>, etc.</li>
    </ol>
  </div>

  <div class="success">
    <strong>Congratulations!</strong> Once all migrations have been applied successfully, your Simple CRM application will have all the database tables it needs to function properly.
  </div>

  <h2>Troubleshooting</h2>

  <p>If you encounter any errors during execution:</p>
  <ul>
    <li>Make sure your Supabase instance is on a plan that allows running arbitrary SQL (all paid plans support this)</li>
    <li>Check the error message - it may indicate a specific issue that needs to be addressed</li>
    <li>If some tables already exist, the script uses <code>IF NOT EXISTS</code> clauses, so it should skip those tables</li>
    <li>Refer to the <code>TROUBLESHOOTING.md</code> file in the project for additional guidance</li>
  </ul>

  <p>
    After successfully running the migrations, restart your application to ensure all changes take effect.
  </p>
</body>
</html> 